<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ›¡ï¸ ã‚®ãƒ«ãƒ‰ãƒ¡ãƒ³ãƒãƒ¼ç™»éŒ² - ã‚ãã‚ãã‚®ãƒ«ãƒ‰</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <div class="container">
      <h1>âš”ï¸ ã‚ãã‚ãã‚®ãƒ«ãƒ‰</h1>
      <nav>
        <a href="index.html">ã‚¯ã‚¨ã‚¹ãƒˆæ²ç¤ºæ¿</a>
        <a href="ranking.html">ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
        <a href="member.html">ãƒ¡ãƒ³ãƒãƒ¼ç™»éŒ²</a>
        <a href="client.html">ä¾é ¼ä¸»ç™»éŒ²</a>
        <a href="mypage.html">ãƒã‚¤ãƒšãƒ¼ã‚¸</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="container form-section">
      <div class="hero">
        <h2>ğŸ›¡ï¸ ã‚®ãƒ«ãƒ‰ãƒ¡ãƒ³ãƒãƒ¼ç™»éŒ²</h2>
        <p>ã‚ãªãŸã‚‚ã‚®ãƒ«ãƒ‰ã®ä¸€å“¡ã¨ã—ã¦ã€åœ°åŸŸã®ã‚¯ã‚¨ã‚¹ãƒˆã«æŒ‘æˆ¦ã—ã¾ã›ã‚“ã‹ï¼Ÿ</p>
      </div>

      <form id="memberForm">
        <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¨®åˆ¥ï¼ˆæœ€åˆã«é¸æŠï¼‰ -->
        <div class="form-group">
          <label>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¨®åˆ¥ <span class="required">*</span></label>
          <select id="userType" name="userType" required>
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            <option value="å€‹äºº">å€‹äººãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆ1åã§å—æ³¨ï¼‰</option>
            <option value="æ³•äºº">æ³•äººãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆè¤‡æ•°åã§å—æ³¨å¯èƒ½ï¼‰</option>
          </select>
          <small>
            <strong>å€‹äºº:</strong> å¸¸ã«1åå˜ä½ã§å¿œå‹Ÿã—ã¾ã™<br>
            <strong>æ³•äºº:</strong> å—æ³¨æ™‚ã«å‚åŠ äººæ•°ã‚’æŒ‡å®šã§ãã¾ã™ï¼ˆä¾‹: 3åã§å¿œå‹Ÿï¼‰
          </small>
        </div>

        <!-- æ³•äººåï¼ˆæ³•äººã®å ´åˆã®ã¿è¡¨ç¤ºï¼‰ -->
        <div class="form-group" id="corporateNameGroup" style="display: none;">
          <label>æ³•äººåãƒ»å›£ä½“å <span class="required">*</span></label>
          <input type="text" id="corporateName" name="corporateName">
          <small>æ­£å¼ãªæ³•äººåã¾ãŸã¯å›£ä½“åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</small>
        </div>

        <!-- æ°åï¼ˆæ‹…å½“è€…åï¼‰ -->
        <div class="form-group">
          <label id="nameLabel">æ°å <span class="required">*</span></label>
          <input type="text" id="name" name="name" required>
          <small id="nameHelp">å€‹äººã®æ–¹ã¯æœ¬åã€æ³•äººã®æ–¹ã¯æ‹…å½“è€…åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</small>
        </div>

        <!-- ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ  -->
        <div class="form-group">
          <label>ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼ˆã‚®ãƒ«ãƒ‰å†…è¡¨ç¤ºåï¼‰ <span class="required">*</span></label>
          <input type="text" id="nickname" name="nickname" required>
          <small>ä»–ã®ãƒ¡ãƒ³ãƒãƒ¼ã‚„ä¾é ¼ä¸»ã«è¡¨ç¤ºã•ã‚Œã‚‹åå‰ã§ã™</small>
        </div>

        <!-- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ -->
        <div class="form-group">
          <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required">*</span></label>
          <input type="email" id="email" name="email" required>
        </div>

        <!-- é›»è©±ç•ªå· -->
        <div class="form-group">
          <label>é›»è©±ç•ªå· <span class="required">*</span></label>
          <input type="tel" id="phone" name="phone" required>
        </div>

        <!-- ä½æ‰€ -->
        <div class="form-group">
          <label>ä½æ‰€ <span class="required">*</span></label>
          <input type="text" id="address" name="address" required>
        </div>

        <!-- å¾—æ„ãªã‚¹ã‚­ãƒ« -->
        <fieldset>
          <legend>å¾—æ„ãªã‚¹ã‚­ãƒ«ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</legend>
          <div class="checkbox-group">
            <label><input type="checkbox" name="skills" value="è‰åˆˆã‚Š"> ğŸŒ¿ è‰åˆˆã‚Š</label>
            <label><input type="checkbox" name="skills" value="åŠ›ä»•äº‹"> ğŸ’ª åŠ›ä»•äº‹</label>
            <label><input type="checkbox" name="skills" value="ITæ”¯æ´"> ğŸ’» ITæ”¯æ´</label>
            <label><input type="checkbox" name="skills" value="æ–™ç†"> ğŸ³ æ–™ç†</label>
            <label><input type="checkbox" name="skills" value="æ¸…æƒ"> ğŸ§¹ æ¸…æƒ</label>
            <label><input type="checkbox" name="skills" value="ãã®ä»–"> ğŸ“¦ ãã®ä»–</label>
          </div>
        </fieldset>

        <!-- å ±é…¬æŒ¯è¾¼å…ˆæƒ…å ± -->
        <fieldset>
          <legend>ğŸ’³ å ±é…¬æŒ¯è¾¼å…ˆæƒ…å ±</legend>
          
          <div class="form-group">
            <label>éŠ€è¡Œå <span class="required">*</span></label>
            <input type="text" id="bankName" name="bankName" required>
          </div>

          <div class="form-group">
            <label>æ”¯åº—å <span class="required">*</span></label>
            <input type="text" id="branchName" name="branchName" required>
          </div>

          <div class="form-group">
            <label>å£åº§ç¨®åˆ¥ <span class="required">*</span></label>
            <select id="accountType" name="accountType" required>
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="æ™®é€š">æ™®é€š</option>
              <option value="å½“åº§">å½“åº§</option>
            </select>
          </div>

          <div class="form-group">
            <label>å£åº§ç•ªå· <span class="required">*</span></label>
            <input type="text" id="accountNumber" name="accountNumber" required>
          </div>

          <div class="form-group">
            <label>å£åº§åç¾©ï¼ˆã‚«ãƒŠï¼‰ <span class="required">*</span></label>
            <input type="text" id="accountHolder" name="accountHolder" required placeholder="ä¾‹: ãƒ¤ãƒãƒ€ã‚¿ãƒ­ã‚¦">
          </div>
        </fieldset>

        <!-- åˆ©ç”¨è¦ç´„ -->
        <div class="form-group">
          <label>
            <input type="checkbox" id="agree" name="agree" required>
            åˆ©ç”¨è¦ç´„ãŠã‚ˆã³ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«åŒæ„ã—ã¾ã™
          </label>
        </div>

        <button type="submit" class="btn-primary">ç™»éŒ²ç”³è«‹ã™ã‚‹</button>
      </form>

      <!-- ç™»éŒ²ã«ã¤ã„ã¦ -->
      <div class="info-box">
        <h3>ğŸ’¡ ãƒ¡ãƒ³ãƒãƒ¼ç™»éŒ²ã«ã¤ã„ã¦</h3>
        <ul>
          <li>ç™»éŒ²ç”³è«‹å¾Œã€äº‹å‹™å±€ãŒå¯©æŸ»ã‚’è¡Œã„ã¾ã™ï¼ˆé€šå¸¸2-3å–¶æ¥­æ—¥ï¼‰</li>
          <li>æ‰¿èªå¾Œã€ã‚¯ã‚¨ã‚¹ãƒˆã¸ã®å¿œå‹ŸãŒå¯èƒ½ã«ãªã‚Šã¾ã™</li>
          <li>åˆæœŸãƒ©ãƒ³ã‚¯ã¯Fã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™</li>
          <li>ã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Œäº†ã™ã‚‹ã¨çµŒé¨“å€¤ã‚’ç²å¾—ã—ã€ãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—ã§ãã¾ã™</li>
          <li><strong>æ³•äººãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> å—æ³¨æ™‚ã«å‚åŠ äººæ•°ã‚’æŒ‡å®šã§ãã¾ã™ï¼ˆä¾‹: 5åå‹Ÿé›†ã®ã‚¯ã‚¨ã‚¹ãƒˆã«3åã§å¿œå‹Ÿï¼‰</li>
        </ul>
      </div>
    </div>
  </main>

  <footer>
    <p>Â© 2026 ç·ç¤¾å¸‚ã‚®ãƒ«ãƒ‰äº‹å‹™å±€ | ã‚ãã‚ãã‚®ãƒ«ãƒ‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</p>
  </footer>

  <script src="js/config.js"></script>
  <script>
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¨®åˆ¥ã®å¤‰æ›´ç›£è¦–
    document.getElementById('userType').addEventListener('change', (e) => {
      const userType = e.target.value;
      const corporateNameGroup = document.getElementById('corporateNameGroup');
      const corporateNameInput = document.getElementById('corporateName');
      const nameLabel = document.getElementById('nameLabel');
      const nameHelp = document.getElementById('nameHelp');
      
      if (userType === 'æ³•äºº') {
        // æ³•äººã®å ´åˆ
        corporateNameGroup.style.display = 'block';
        corporateNameInput.required = true;
        nameLabel.innerHTML = 'æ‹…å½“è€…å <span class="required">*</span>';
        nameHelp.textContent = 'æ³•äººã®æ‹…å½“è€…åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
      } else {
        // å€‹äººã®å ´åˆ
        corporateNameGroup.style.display = 'none';
        corporateNameInput.required = false;
        corporateNameInput.value = '';
        nameLabel.innerHTML = 'æ°å <span class="required">*</span>';
        nameHelp.textContent = 'æœ¬åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
      }
    });

    // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
    document.getElementById('memberForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // ã‚¹ã‚­ãƒ«ã®å–å¾—
      const skillCheckboxes = document.querySelectorAll('input[name="skills"]:checked');
      const skills = Array.from(skillCheckboxes).map(cb => cb.value).join(', ');
      
      // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®åé›†
      const formData = {
        userType: document.getElementById('userType').value,
        corporateName: document.getElementById('corporateName').value,
        name: document.getElementById('name').value,
        nickname: document.getElementById('nickname').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        address: document.getElementById('address').value,
        skills: skills,
        bankName: document.getElementById('bankName').value,
        branchName: document.getElementById('branchName').value,
        accountType: document.getElementById('accountType').value,
        accountNumber: document.getElementById('accountNumber').value,
        accountHolder: document.getElementById('accountHolder').value
      };
      
      // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      if (!formData.userType) {
        alert('ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¨®åˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„');
        return;
      }
      
      if (formData.userType === 'æ³•äºº' && !formData.corporateName) {
        alert('æ³•äººåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }
      
      if (!formData.skills) {
        alert('å¾—æ„ãªã‚¹ã‚­ãƒ«ã‚’å°‘ãªãã¨ã‚‚1ã¤é¸æŠã—ã¦ãã ã•ã„');
        return;
      }
      
      // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
      const submitBtn = e.target.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = 'é€ä¿¡ä¸­...';
      
      try {
        const result = await API.post('registerMember', formData);
        
        if (result.success) {
          alert(`âœ… ç™»éŒ²ç”³è«‹ãŒå®Œäº†ã—ã¾ã—ãŸï¼\n\nãƒ¡ãƒ³ãƒãƒ¼ID: ${result.memberId}\n\nå¯©æŸ»å®Œäº†å¾Œã€ç™»éŒ²ã•ã‚ŒãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã«é€šçŸ¥ã‚’ãŠé€ã‚Šã—ã¾ã™ã€‚`);
          
          // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
          e.target.reset();
          document.getElementById('corporateNameGroup').style.display = 'none';
        } else {
          alert('âŒ ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + result.message);
        }
      } catch (error) {
        console.error('ç™»éŒ²ã‚¨ãƒ©ãƒ¼:', error);
        alert('âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'ç™»éŒ²ç”³è«‹ã™ã‚‹';
      }
    });
  </script>
</body>
</html>